
这是一个测试文档,txt格式. 关于Agentlz项目的简介和开发规范（企业后端 / LangChain）


本规范面向企业级后端服务，目标是提供一个通过 HTTPS 暴露接口的 Agent 平台。企业可在平台上开发/托管 Agent，上传企业文档并进行检索增强（RAG），基础存储采用 MySQL（结构化/元数据）与 PostgreSQL（向量存储，基于 pgvector）。本规范约束架构分层、编码方式、安全与合规、API 设计、测试与运维等方面，确保可维护、可扩展与可审计。

当前目标

1. **Agent 即服务 (Agent as a Service)**: 企业用户可以在本平台开发 `check`, `plan`, `tools` 类型的 Agent。这些 Agent 都通过 MCP (Multi-Agent Communication Protocol) 协议开放接口，可以被其他 Agent 远程调用，实现类似插件的模式。

2. **智能调度 Agent (Intelligent Schedule Agent)**: 开发一个总调度 Agent (`schedule_agent`)，它作为整个系统的“智能指挥官”。这个 Agent 开放 FastAPI 接口，其核心逻辑由一个强大的 LLM 和一个精心设计的“主提示词 (Master Prompt)”驱动，而非固定的代码流程。

智能调度 Agent 的核心工作流

```mermaid


graph TD
    A[用户输入] -->Q[RAG];
    Q--> B[plan_agent<br/>生成执行计划];

    P[mcp 可信度表] -->B;
    B --> P;

    B -- 超过最大循环限制 --> M[输出最终答案给用户];

    subgraph execute_agent [**execute agent 执行器**]
        direction LR
        C[接收计划] --> D[遍历计划步骤];
        D --> E{还有未执行步骤?};
        E -- 是 --> F[调用 tools agent];
        F --> H[ 调用 check agent];
        H --> I{验证通过?};
        I -- 通过 --> D;
        I -- 不通过 --> J{可重试/换工具?};
        J -- 是 --> F;
        J -- 否 --> K[返回执行失败];
           
    E -- 否 --> L[汇总结果];  
    L --> O[调用 check agent]; 
    
        
    end

    B --> C;
    K -- 失败 --> B;
    O -- 否 --> B;
    O -- 是 --> M[输出最终答案给用户];
    
```